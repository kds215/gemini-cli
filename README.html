<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>readme</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="README_files/libs/clipboard/clipboard.min.js"></script>
<script src="README_files/libs/quarto-html/quarto.js"></script>
<script src="README_files/libs/quarto-html/popper.min.js"></script>
<script src="README_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="README_files/libs/quarto-html/anchor.min.js"></script>
<link href="README_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="README_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="README_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="README_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="README_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="release-kds215gemini-cli0.2.0---public-beta-for-accessibility-testing" class="level1">
<h1>Release: <span class="citation" data-cites="kds215/gemini-cli">[@kds215/gemini-cli@0.2.0]</span> - Public Beta for Accessibility Testing</h1>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>Welcome to the public beta release of <strong>gemini for the blind</strong>! This <span class="citation" data-cites="kds215/gemini-cli">@kds215/gemini-cli</span><span class="citation" data-cites="0.2.0">@0.2.0</span> version is intended for use by blind and visually impaired users. Your feedback (especially from blind users) is crucial to making this tool as accessible and effective as possible. With your beta testing support, hopefully, this version will become part of the next official <span class="citation" data-cites="google/gemini-cli">@google/gemini-cli</span> release.</p>
<p>The main difference between the official <span class="citation" data-cites="google/gemini-cli">@google/gemini-cli</span> and <strong>this <span class="citation" data-cites="kds215/gemini-cli">@kds215/gemini-cli</span> version</strong> is that it has an <strong>added [ -r or –reader ] option</strong> to suppress the output of all ascii-box-drawing characters shown around every gemini output line. Without the <strong>–reader option</strong> it is impractical for blind users to listen at gemini launch time for roughly 3 minutes just for the “Gemini” banner made up of black&amp;white box characters. In addition every gemini generated output line is framed by box-drawing ascii characters that must also by read by a reader.</p>
<p>Using <strong>gemini -r or –reader</strong> option frees readers from sounding-out all (useless) clutter characters and blind users can focus on their AI-gemini tasks at hand.</p>
</section>
<section id="important" class="level2">
<h2 class="anchored" data-anchor-id="important">Important</h2>
<p>With the –reader option gemini returns results without framing borders around output lines. Here are examples of what specific output characters to look for to navigate through gemini’s responses:</p>
<ol type="1">
<li><strong>a new prompt line always starts with</strong></li>
</ol>
<ul>
<li>” <strong>&gt;</strong> Type your message or <span class="citation" data-cites="path/to/file">@path/to/file</span> “</li>
<li>and the cursor is right after the “ <strong>&gt;</strong> “ character.</li>
<li>Your input typing will always override this ‘Type your message…’ string.</li>
</ul>
<ol start="2" type="1">
<li>after entering your prompt line, type <strong>RETURN</strong>, gemini’s response will start with</li>
</ol>
<ul>
<li>an small plus sign “ <strong>✦</strong> “ (or like a star symbol) in the output line’s first position</li>
<li>followed by other explanations &amp; comments from gemini etc.</li>
</ul>
<ol start="3" type="1">
<li>now, within this “ <strong>✦</strong> “ response text block, gemini can start a new line with</li>
</ol>
<ul>
<li>two leading spaces followed by a check-mark character “ <strong>✔</strong> “.</li>
<li>This indicates a tool usage like Shell command, WriteFile, ReadFolder, ReadFile, etc.</li>
<li>Instead of the check-mark there can be also a ” <strong>?</strong> ” to show the tool to be</li>
<li>run but you need to give it permission to run.</li>
</ul>
<ol start="4" type="1">
<li>after your <strong>prompt</strong> has been answered</li>
</ol>
<ul>
<li>a new “ <strong>&gt;</strong> “ prompt line appears as in item 1. above.</li>
</ul>
</section>
<section id="from-the-official-googlegemini-cli-readme" class="level2">
<h2 class="anchored" data-anchor-id="from-the-official-googlegemini-cli-readme">From the official <span class="citation" data-cites="google/gemini-cli">@google/gemini-cli</span> README:</h2>
<p>This repository contains the Gemini CLI, a command-line AI workflow tool that connects to your tools, understands your code and accelerates your workflows.</p>
<p>With the Gemini CLI you can:</p>
<ul>
<li>Query and edit large codebases in and beyond Gemini’s 1M token context window.</li>
<li>Generate new apps from PDFs or sketches, using Gemini’s multimodal capabilities (prompt and images input).</li>
<li>Automate operational tasks, like querying pull requests or handling complex rebases.</li>
<li>Use tools and MCP servers to connect new capabilities, including <a href="https://github.com/GoogleCloudPlatform/vertex-ai-creative-studio/tree/main/experiments/mcp-genmedia">media generation with Imagen, Veo or Lyria</a></li>
<li>Ground your queries with the <a href="https://ai.google.dev/gemini-api/docs/grounding">Google Search</a> tool, built into Gemini.</li>
</ul>
</section>
<section id="quickstart" class="level2">
<h2 class="anchored" data-anchor-id="quickstart">Quickstart</h2>
<p>You have two options to install Gemini CLI.</p>
<section id="with-node" class="level3">
<h3 class="anchored" data-anchor-id="with-node">With Node</h3>
<ol type="1">
<li><p><strong>Prerequisites:</strong> Ensure you have <a href="https://nodejs.org/en/download">Node.js version 20</a> or higher installed.</p></li>
<li><p><strong>Run the CLI:</strong> Execute the following command in your terminal:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npx</span> https://github.com/kds215/gemini-cli <span class="at">-r</span> or <span class="at">--reader</span>    <span class="er">(</span> <span class="ex">-r</span> or reader with 2 dashes <span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Or install</strong> first with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-g</span> @kds215/gemini-cli</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then second, run the CLI from anywhere:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gemini</span> <span class="at">-r</span> or <span class="at">--reader</span>     <span class="er">(</span> <span class="ex">-r</span> or reader with 2 dashes <span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="with-homebrew" class="level3">
<h3 class="anchored" data-anchor-id="with-homebrew">With Homebrew</h3>
<ol type="1">
<li><p><strong>Prerequisites:</strong> Ensure you have <a href="https://brew.sh/">Homebrew</a> installed.</p></li>
<li><p><strong>Install the CLI</strong> Execute the following command in your terminal first:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install gemini-cli</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then second, run the CLI from anywhere:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gemini</span> <span class="at">-r</span> or <span class="at">--reader</span>    <span class="er">(</span><span class="ex">reader</span> with 2 dashes<span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="common-configuration-steps-when-running-gemini-using-commands" class="level3">
<h3 class="anchored" data-anchor-id="common-configuration-steps-when-running-gemini-using-commands">Common Configuration steps when running gemini using /commands</h3>
<ol start="3" type="1">
<li><strong>Pick a color theme</strong> using /theme command to pick a suitable color theme for your VI needs.</li>
<li><strong>Authenticate:</strong> When prompted, sign in with your <strong>personal</strong> Google account. This will grant you up to 60 model requests per minute and 1,000 model requests per day using Gemini.</li>
</ol>
<p>You are now ready to use the Gemini CLI!</p>
</section>
<section id="use-a-gemini-api-key" class="level3">
<h3 class="anchored" data-anchor-id="use-a-gemini-api-key">Use a Gemini API key:</h3>
<p>The Gemini API provides a free tier with <a href="https://ai.google.dev/gemini-api/docs/rate-limits#free-tier">100 requests per day</a> using Gemini 2.5 Pro, control over which model you use, and access to higher rate limits (with a paid plan):</p>
<ol type="1">
<li><p>Generate a key from <a href="https://aistudio.google.com/apikey">Google AI Studio</a>.</p></li>
<li><p>Set it as an environment variable in your terminal. Replace <code>YOUR_API_KEY</code> with your generated key.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">GEMINI_API_KEY</span><span class="op">=</span><span class="st">"YOUR_API_KEY"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>(Optionally) Upgrade your Gemini API project to a paid plan on the API key page (will automatically unlock <a href="https://ai.google.dev/gemini-api/docs/rate-limits#tier-1">Tier 1 rate limits</a>)</p></li>
</ol>
</section>
<section id="use-a-vertex-ai-api-key" class="level3">
<h3 class="anchored" data-anchor-id="use-a-vertex-ai-api-key">Use a Vertex AI API key:</h3>
<p>The Vertex AI API provides a <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/start/express-mode/overview">free tier</a> using express mode for Gemini 2.5 Pro, control over which model you use, and access to higher rate limits with a billing account:</p>
<ol type="1">
<li><p>Generate a key from <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/start/api-keys">Google Cloud</a>.</p></li>
<li><p>Set it as an environment variable in your terminal. Replace <code>YOUR_API_KEY</code> with your generated key and set GOOGLE_GENAI_USE_VERTEXAI to true</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">GOOGLE_API_KEY</span><span class="op">=</span><span class="st">"YOUR_API_KEY"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">GOOGLE_GENAI_USE_VERTEXAI</span><span class="op">=</span>true</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>(Optionally) Add a billing account on your project to get access to <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/quotas">higher usage limits</a></p></li>
</ol>
<p>For other authentication methods, including Google Workspace accounts, see the <a href="./docs/cli/authentication.md">authentication</a> guide.</p>
</section>
</section>
<section id="examples" class="level2">
<h2 class="anchored" data-anchor-id="examples">Examples</h2>
<p>Once the CLI is running, you can start interacting with Gemini from your shell/terminal.</p>
<p>You can start a project from a new directory:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> new-project/</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">gemini</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> Write <span class="ex">me</span> a Gemini Discord bot that answers questions using a FAQ.md file I will provide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or work with an existing project:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/google-gemini/gemini-cli</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> gemini-cli</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="ex">gemini</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> Give <span class="ex">me</span> a summary of all of the changes that went in yesterday</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="next-steps" class="level3">
<h3 class="anchored" data-anchor-id="next-steps">Next steps</h3>
<ul>
<li>Learn how to <a href="./CONTRIBUTING.md">contribute to or build from the source</a>.</li>
<li>Explore the available <strong><a href="./docs/cli/commands.md">CLI Commands</a></strong>.</li>
<li>If you encounter any issues, review the <strong><a href="./docs/troubleshooting.md">troubleshooting guide</a></strong>.</li>
<li>For more comprehensive documentation, see the <a href="./docs/index.md">full documentation</a>.</li>
<li>Take a look at some <a href="#popular-tasks">popular tasks</a> for more inspiration.</li>
<li>Check out our <strong><a href="./ROADMAP.md">Official Roadmap</a></strong></li>
</ul>
</section>
<section id="troubleshooting" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting">Troubleshooting</h3>
<p>Head over to the <a href="docs/troubleshooting.md">troubleshooting guide</a> if you’re having issues.</p>
</section>
</section>
<section id="popular-tasks" class="level2">
<h2 class="anchored" data-anchor-id="popular-tasks">Popular tasks</h2>
<section id="explore-a-new-codebase" class="level3">
<h3 class="anchored" data-anchor-id="explore-a-new-codebase">Explore a new codebase</h3>
<p>Start by <code>cd</code>ing into an existing or newly-cloned repository and running <code>gemini</code>.</p>
<pre class="text"><code>&gt; Describe the main pieces of this system's architecture.</code></pre>
<pre class="text"><code>&gt; What security mechanisms are in place?</code></pre>
</section>
<section id="work-with-your-existing-code" class="level3">
<h3 class="anchored" data-anchor-id="work-with-your-existing-code">Work with your existing code</h3>
<pre class="text"><code>&gt; Implement a first draft for GitHub issue #123.</code></pre>
<pre class="text"><code>&gt; Help me migrate this codebase to the latest version of Java. Start with a plan.</code></pre>
</section>
<section id="automate-your-workflows" class="level3">
<h3 class="anchored" data-anchor-id="automate-your-workflows">Automate your workflows</h3>
<p>Use MCP servers to integrate your local system tools with your enterprise collaboration suite.</p>
<pre class="text"><code>&gt; Make me a slide deck showing the git history from the last 7 days, grouped by feature and team member.</code></pre>
<pre class="text"><code>&gt; Make a full-screen web app for a wall display to show our most interacted-with GitHub issues.</code></pre>
</section>
<section id="interact-with-your-system" class="level3">
<h3 class="anchored" data-anchor-id="interact-with-your-system">Interact with your system</h3>
<pre class="text"><code>&gt; Convert all the images in this directory to png, and rename them to use dates from the exif data.</code></pre>
<pre class="text"><code>&gt; Organize my PDF invoices by month of expenditure.</code></pre>
</section>
<section id="uninstall" class="level3">
<h3 class="anchored" data-anchor-id="uninstall">Uninstall</h3>
<p>Head over to the <a href="docs/Uninstall.md">Uninstall</a> guide for uninstallation instructions.</p>
</section>
</section>
<section id="accessibility-features" class="level2">
<h2 class="anchored" data-anchor-id="accessibility-features">Accessibility Features</h2>
<ul>
<li>Keyboard-only navigation support.</li>
<li>Screen reader compatibility.</li>
<li>use <strong>gemini -r or –reader</strong> option for no clutter output to quiet down readers.</li>
</ul>
</section>
<section id="known-issues-limitations" class="level2">
<h2 class="anchored" data-anchor-id="known-issues-limitations">Known Issues / Limitations</h2>
<ul>
<li>tested with reader: VoiceOver (macOS)</li>
<li>tested on macOS 15.5 and windows11</li>
</ul>
</section>
<section id="how-to-give-feedback" class="level2">
<h2 class="anchored" data-anchor-id="how-to-give-feedback">How to Give Feedback</h2>
<p>We value your input! Please report bugs, accessibility issues, or suggestions:</p>
<ul>
<li><a href="https://github.com/kds215/gemini-cli/issues">Open an issue on GitHub.</a></li>
<li>Email: [klaus@szyska.com]</li>
<li>[Other feedback channels, if any.]</li>
</ul>
</section>
<section id="changelog" class="level2">
<h2 class="anchored" data-anchor-id="changelog">Changelog</h2>
<ul>
<li>[List major changes since the previous version, if applicable.]</li>
</ul>
</section>
<section id="contributors" class="level2">
<h2 class="anchored" data-anchor-id="contributors">Contributors</h2>
<p>Thank you to everyone who is testing this release! And thanks to gemini-cli itself who graciously has changed its own frontend code.</p>
<hr>
<p><em>Please note: This is a beta release. There may be bugs or incomplete features. Your feedback helps us improve!</em></p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>